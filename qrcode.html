<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>QR Code</title>
    <link rel="stylesheet" type="text/css" href="css/style_qrcode.css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <h1>QR Code do Presente</h1>
    <div id="qrcode-img"></div>
    <a href="index.html" class="back-link">Voltar para a lista</a>
    <script>
      const params = new URLSearchParams(window.location.search);
      const pix = params.get("pix");
      const linkValue = params.get("link");
      if (pix) {
        const container = document.createElement("div");
        container.style.display = "flex";
        container.style.alignItems = "center";
        container.style.justifyContent = "center";
        container.style.gap = "32px";

        const img = document.createElement("img");
        img.src = pix;
        img.alt = "QR Code do presente";

        const link = document.createElement("p");
        link.innerText = linkValue || "";

        const copyBtn = document.createElement("button");
        copyBtn.innerText = "Copiar código PIX";
        copyBtn.onclick = function() {
          if (linkValue) {
            navigator.clipboard.writeText(linkValue);
            copyBtn.innerText = "Copiado!";
            setTimeout(() => { copyBtn.innerText = "Copiar código PIX"; }, 1500);
          }
        };

        container.appendChild(img);
        const linkBtnContainer = document.createElement("div");
        linkBtnContainer.style.display = "flex";
        linkBtnContainer.style.flexDirection = "column";
        linkBtnContainer.style.alignItems = "center";
        linkBtnContainer.appendChild(link);
        linkBtnContainer.appendChild(copyBtn);
        container.appendChild(linkBtnContainer);
        document.getElementById("qrcode-img").appendChild(container);
      } else {
        document.getElementById("qrcode-img").innerText =
          "QR Code não encontrado.";
      }
    </script>
  </body>
</html>
