<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>QR Code</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <main style="flex: 1 0 auto; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;">
      <h1>QR Code do Presente</h1>
      <div id="qrcode-card"></div>
      <a href="index.html" class="back-link">Voltar para a Lista</a>
    </main>
    <script>
      const params = new URLSearchParams(window.location.search);
      const pix = params.get("pix");
      const linkValue = params.get("link");
      if (pix) {
        const container = document.createElement("div");
        container.className = "qrcode-container";

        const img = document.createElement("img");
        img.src = pix;
        img.alt = "QR Code do presente";

        const link = document.createElement("p");
        link.innerText = linkValue || "";

        const copyBtn = document.createElement("button");
        copyBtn.innerText = "Copiar C처digo PIX";
        copyBtn.onclick = function () {
          if (linkValue) {
            navigator.clipboard.writeText(linkValue);
            copyBtn.innerText = "Copiado!";
            setTimeout(() => {
              copyBtn.innerText = "Copiar C처digo PIX";
            }, 1500);
          }
        };

        container.appendChild(img);
        const linkBtnContainer = document.createElement("div");
        linkBtnContainer.className = "qrcode-info";
        linkBtnContainer.appendChild(link);
        linkBtnContainer.appendChild(copyBtn);
        container.appendChild(linkBtnContainer);
        document.getElementById("qrcode-card").appendChild(container);
      } else {
        document.getElementById("qrcode-card").innerText =
          "QR Code n찾o encontrado.";
      }
    </script>
    <footer>
      Desenvolvido por Claudio Guimar찾es
      <a
        href="https://github.com/guimazito"
        target="_blank"
        style="color: #fff; text-decoration: underline"
        >@guimazito</a
      >
    </footer>
  </body>
</html>
